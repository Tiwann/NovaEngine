SET(ENGINE_MODULES Audio Core Physics Input)

FOREACH (MODULE ${ENGINE_MODULES})
    ADD_SUBDIRECTORY(${MODULE})

    SET(MODULE_EXPORT_HEADER ${CMAKE_CURRENT_LIST_DIR}/ModuleExport.in.h)
    SET(HEADER_FILE ${CMAKE_BINARY_DIR}/Include/${MODULE}Export.h)
    FILE(READ ${MODULE_EXPORT_HEADER} HEADER_CONTENTS)
    STRING(TOUPPER ${MODULE} MODULE_UPPER)
    STRING(REPLACE "@MODULE_NAME@" ${MODULE_UPPER} HEADER_CONTENTS ${HEADER_CONTENTS})
    FILE(WRITE ${HEADER_FILE} ${HEADER_CONTENTS})


    TARGET_COMPILE_DEFINITIONS(NovaEngine-${MODULE}
            INTERFACE MODULE_SHARED
            INTERFACE MODULE_BUILD)

    TARGET_INCLUDE_DIRECTORIES(NovaEngine-${MODULE} PUBLIC ${CMAKE_BINARY_DIR}/Include)
    TARGET_INCLUDE_DIRECTORIES(NovaEngine-${MODULE} PUBLIC ${MODULE}/Public)
    TARGET_INCLUDE_DIRECTORIES(NovaEngine-${MODULE} PRIVATE ${MODULE}/Private)
ENDFOREACH ()